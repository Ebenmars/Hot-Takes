{"ast":null,"code":"import{SECTIONS}from\"./data.js\";import{useState}from\"react\";import supabase from\"./supabase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewPostForm(_ref){let{setPosts,setShowForm}=_ref;const[title,setTitle]=useState(\"\");const[description,setDescription]=useState(\"\");const[category,setCatagory]=useState(\"\");const[isUploading,setIsUploading]=useState(false);//This is for the textarea\nfunction autoGrow(event){event.target.style.height=\"5px\";event.target.style.height=event.target.scrollHeight+\"px\";}async function handleSumbit(event){event.preventDefault();if(title&&description&&category){setIsUploading(true);const{data:newPost,error}=await supabase.from(\"posts\").insert([{title,description,category}]).select();setIsUploading(false);if(!error)setPosts(prevPosts=>[newPost[0],...prevPosts]);setTitle(\"\");setDescription(\"\");setCatagory(\"\");// setShowForm(false);\n}}return/*#__PURE__*/_jsxs(\"form\",{className:\"post-form\",onSubmit:handleSumbit,children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"form-description\",placeholder:\"Hot Take\",value:title,style:{resize:\"none\"},onInput:autoGrow,onChange:eventObj=>setTitle(eventObj.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-description\",placeholder:\"Explain Your Hot Take\",value:description,style:{resize:\"none\"},onInput:autoGrow,disabled:isUploading,onChange:eventObj=>setDescription(eventObj.target.value)}),/*#__PURE__*/_jsxs(\"span\",{children:[\" Word Count: \",description.split(\" \").length-1]}),/*#__PURE__*/_jsxs(\"select\",{value:category,disabled:isUploading,onChange:eventObj=>setCatagory(eventObj.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Topic\"}),SECTIONS.map(section=>/*#__PURE__*/_jsx(\"option\",{value:section.name,children:section.name},section.name))]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",disabled:isUploading,children:\"Post\"})]});}export default NewPostForm;","map":{"version":3,"names":["SECTIONS","useState","supabase","jsx","_jsx","jsxs","_jsxs","NewPostForm","_ref","setPosts","setShowForm","title","setTitle","description","setDescription","category","setCatagory","isUploading","setIsUploading","autoGrow","event","target","style","height","scrollHeight","handleSumbit","preventDefault","data","newPost","error","from","insert","select","prevPosts","className","onSubmit","children","placeholder","value","resize","onInput","onChange","eventObj","disabled","split","length","map","section","name"],"sources":["/Users/ignite/Hot Takes/src/NewPostForm.js"],"sourcesContent":["import { SECTIONS } from \"./data.js\";\nimport { useState } from \"react\";\nimport supabase from \"./supabase\";\n\n\nfunction NewPostForm({setPosts, setShowForm}) {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [category, setCatagory] = useState(\"\");\n  const [isUploading, setIsUploading] = useState(false);\n\n  //This is for the textarea\n  function autoGrow(event) {\n    event.target.style.height = \"5px\";\n    event.target.style.height = event.target.scrollHeight + \"px\";\n  }\n\n  async function handleSumbit(event) {\n    event.preventDefault();\n  \n    if (title && description && category) {\n     \n      setIsUploading(true);\n      const {data:newPost,error} = await supabase.from(\"posts\").insert([{title,description,category}]).select();\n      setIsUploading(false);\n      if(!error) setPosts((prevPosts) => [newPost[0], ...prevPosts]);\n      setTitle(\"\");\n      setDescription(\"\");\n      setCatagory(\"\");\n      // setShowForm(false);\n    }\n  }\n  \n  return (\n    <form className=\"post-form\" onSubmit={handleSumbit}>\n      {/* <input type=\"text\" placeholder=\"Hot Take\"/> */}\n      {/* Read value */}\n      <textarea\n        className=\"form-description\"\n        placeholder=\"Hot Take\"\n        value={title}\n        style={{ resize: \"none\" }}\n        onInput={autoGrow}\n        onChange={(eventObj) => setTitle(eventObj.target.value)}\n      ></textarea>\n      <textarea\n        className=\"form-description\"\n        placeholder=\"Explain Your Hot Take\"\n        value={description}\n        style={{ resize: \"none\" }}\n        onInput={autoGrow}\n        disabled={isUploading}\n        onChange={(eventObj) => setDescription(eventObj.target.value)}\n      ></textarea>\n      <span> Word Count: {description.split(\" \").length - 1}</span>\n      <select\n        value={category}\n        disabled={isUploading}\n        onChange={(eventObj) => setCatagory(eventObj.target.value) }\n      >\n        <option value=\"\">Choose Topic</option>\n        {SECTIONS.map((section) => (\n          <option key={section.name} value={section.name} >\n            {section.name}\n          </option>\n        ))}\n      </select>\n      <button className=\"btn\" disabled={isUploading}>Post</button>\n    </form>\n  );\n}\nexport default NewPostForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}